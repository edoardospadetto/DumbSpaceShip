#Supreme Utility for Graphics Overpowered Software
#Simple Utility for Graphics Oriented Software

CC = em++ -v
XT = cpp
X = app

TEST = 
DEFS = -D DEBUG -ggdb3  -Wall -D OPENGLES -sUSE_SDL=2  -s USE_SDL_IMAGE=2 -sFULL_ES3 -sASYNCIFY --preload-file ./src/shaders_/vectorizedobject.shader --preload-file  ./etc/fonts/font.png #-D SHOWFPS


TARGET = libsugos
#LIBS = -Bstatic -w -lGL -lGLU -lGLEW -lSDL2 -lpthread -lSDL2_image
LIBS = -Bstatic -w -lGLESv2 -lSDL2  -lSDL2_image -I ./src/include/ #-lpthread
SRC_DIR = src/
OBJ_DIR = build/
SRCS = $(wildcard $(SRC_DIR)*/*.cpp)
OBJS = $(patsubst $(SRC_DIR)%.cpp,$(OBJ_DIR)%.o,$(SRCS))


lib: dirs $(OBJS)
	ar rcs  $(TARGET).a $(OBJS)

%_ex:
	$(CC) -c $(DEFS) ./etc/examples/$@.cpp $(LIBS) -I ./src/ -o ./build/$@.o 
	$(CC)  $(DEFS)  ./build/$@.o  $(TARGET).a $(LIBS) -o $@.html #$(X) 

%_tool:
	$(CC) -c $(DEFS) ./etc/tools/$@/$@.cpp $(LIBS) -I ./src/ -o ./build/$@.o 
	$(CC)  $(DEFS)  ./build/$@.o  $(TARGET).a $(LIBS) -o $@.$(X) 	

$(OBJ_DIR)%.o: $(SRC_DIR)%.cpp
	echo $@
	$(CC) $(CFLAGS) $(DEFS) $(CPPFLAGS) -c $< -o ./$@


dirs:	
	@mkdir -p build
	@mkdir -p build/objects_
	@mkdir -p build/modules_
	@mkdir -p build/context_
	@mkdir -p build/attributes_
	@mkdir -p build/engines_
	

clean:
	@rm -rf *.app
	@rm -rf *.html
	@rm -rf *.js
	@rm -rf *.wasm
	@rm -rf *.data
	@rm -rf build
	@rm -rf 
	

